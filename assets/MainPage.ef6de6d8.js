var x=Object.defineProperty,O=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var I=(e,t,o)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&I(e,o,t[o]);if(k)for(var o of k(t))T.call(t,o)&&I(e,o,t[o]);return e},b=(e,t)=>O(e,w(t));import{m as S,_ as l,r as d,o as r,b as n,f,w as q,d as s,t as g,g as N,h as E,c as h,i as m,n as $,j,F as y,a as B,e as V}from"./index.4a1f8d3f.js";import{_ as W,a as F}from"./cart.545cd1e3.js";import{P as M,f as D}from"./fetchProduct.20b82198.js";var G="/vue-store/assets/active-wish.93f0bece.svg";const L={props:{product:{type:Object,required:!0,default:{}}},emits:{"open-popup":null},computed:b(C({},S({wishItems:"wish/getWishItems"})),{isItemExists(){let e=!1;return this.wishItems.forEach(t=>{t.id==this.product.id&&(e=!0)}),e}}),methods:{addWish(e){this.$store.dispatch("wish/addWish",e)},createItem(){const e={id:this.product.id,image:this.product.images[0],title:this.product.title,category:this.product.category,price:this.product.price};this.addWish(e)}}},A={class:"product"},H={class:"product__image"},J=["src"],K={class:"product__body"},Q={class:"product__title"},R={class:"product__content"},U={class:"product__price"},X={class:"product__content-block"},Y=s("img",{src:F,alt:""},null,-1),Z=[Y],ee={key:0,src:W,alt:""},te={key:1,src:G,alt:""};function se(e,t,o,_,i,c){const a=d("router-link");return r(),n("article",A,[f(a,{to:{name:"productPage",params:{id:o.product.id}}},{default:q(()=>[s("div",H,[s("img",{src:o.product.images[0],alt:""},null,8,J)])]),_:1},8,["to"]),s("div",K,[s("p",Q,g(o.product.title),1),s("div",R,[s("span",U,g(o.product.price),1),s("div",X,[s("button",{class:"product__btn",onClick:t[0]||(t[0]=u=>e.$emit("open-popup"))},Z),s("button",{onClick:t[1]||(t[1]=(...u)=>c.createItem&&c.createItem(...u)),class:"product__btn"},[c.isItemExists?(r(),n("img",te)):(r(),n("img",ee))])])])])])}var oe=l(L,[["render",se]]),ce="/vue-store/assets/close.581580b8.svg";const re={emits:{close:null},methods:{close(){this.$emit("close")}}},ie={class:"popup__body"},ae=s("img",{src:ce,alt:""},null,-1),ne=[ae];function ue(e,t,o,_,i,c){return r(),n("div",{class:"popup",onClick:t[2]||(t[2]=(...a)=>c.close&&c.close(...a))},[s("div",ie,[s("div",{class:"popup__content",onClick:t[1]||(t[1]=N(()=>{},["stop"]))},[s("button",{class:"popup__close",onClick:t[0]||(t[0]=(...a)=>c.close&&c.close(...a))},ne),E(e.$slots,"default")])])])}var pe=l(re,[["render",ue]]);const de={components:{PopupOverlay:pe,ProductSlider:M},props:{popupProductId:{type:[Number,String],required:!0,default:null}},emits:{close:null},data(){return{product:{},colors:[],groupProducts:[],size:""}},methods:{close(){this.$emit("close")},changeSize(e){this.size=e},changeColor(e){this.product=this.groupProducts[e]},addToCart(e){this.$store.dispatch("cart/addToCart",e)},createItem(){const e={id:this.product.id,image:this.product.images[0],title:this.product.title,color:this.product.color,size:this.size,category:this.product.category,price:this.product.price,quantity:1};this.addToCart(e)}},created(){D(this.popupProductId).then(e=>{this.product=e,this.colors=e.colors,this.groupProducts=e.groupProducts})}},le={class:"popup-product"},_e={class:"popup-product__info"},ge={class:"popup-product__head"},he={class:"popup-product__head-title"},me={class:"popup-product__head-price"},ye={class:"popup-product__select-box"},ve={class:"popup-product__color"},Pe=s("div",{class:"popup-product__color-title"},[B("\u0426\u0432\u0435\u0442: "),s("span")],-1),fe={class:"popup-product__color-items"},$e=["onClick"],Ce={class:"popup-product__size"},be=s("div",{class:"popup-product__size-title"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043C\u0435\u0440",-1),ke={class:"popup-product__size-items"},Ie=["onClick"],Se={class:"popup-product__add"};function qe(e,t,o,_,i,c){const a=d("product-slider"),u=d("popup-overlay");return r(),h(u,{onClose:c.close},{default:q(()=>[s("div",le,[f(a,{class:"popup-product__slider",images:i.product.images},null,8,["images"]),s("div",_e,[s("div",ge,[s("h1",he,g(i.product.title),1),s("div",me,[s("span",null,g(i.product.price),1)])]),s("div",ye,[s("div",ve,[Pe,s("div",fe,[(r(!0),n(y,null,m(i.colors,(p,v)=>(r(),n("button",{class:$(["popup-product__color-item",{active:p.value==this.product.color.value}]),key:p,onClick:P=>c.changeColor(v),style:j({background:p.value})},null,14,$e))),128))])]),s("div",Ce,[be,s("div",ke,[(r(!0),n(y,null,m(i.product.sizes,p=>(r(),n("button",{class:$(["popup-product__size-item",{active:p==this.size}]),key:p,onClick:v=>c.changeSize(p)},g(p),11,Ie))),128))])])]),s("div",Se,[s("button",{class:"popup-product__add-btn",onClick:t[0]||(t[0]=(...p)=>c.createItem&&c.createItem(...p))}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443 ")])])])]),_:1},8,["onClose"])}var xe=l(de,[["render",qe]]);const Oe={props:{category:{type:Object,required:!0},selectedCategory:{type:String,required:!0}},emits:{"select-category":null}};function we(e,t,o,_,i,c){return r(),n("button",{onClick:t[0]||(t[0]=a=>e.$emit("select-category")),class:$(["categories__item",{active:o.category.value==o.selectedCategory}])},[s("span",null,g(o.category.title),1)],2)}var ze=l(Oe,[["render",we]]);const Te={components:{CategoryItem:ze},props:{selectedCategory:{type:String,requiired:!0,default:""}},emits:{"select-category":e=>typeof e=="string"},data(){return{categoryItems:[{title:"\u0412\u0441\u0435",value:""},{title:"\u0428\u0442\u0430\u043D\u044B",value:"trousers"},{title:"\u0424\u0443\u0442\u0431\u043E\u043B\u043A\u0438",value:"t-short"},{title:"\u0425\u0443\u0434\u0438",value:"hoodie"}]}},methods:{selectCategory(e){this.$emit("select-category",e)}}},Ne={class:"categories"};function Ee(e,t,o,_,i,c){const a=d("category-item");return r(),n("div",Ne,[(r(!0),n(y,null,m(i.categoryItems,u=>(r(),h(a,{key:u.value,category:u,onSelectCategory:p=>c.selectCategory(u.value),selectedCategory:o.selectedCategory},null,8,["category","onSelectCategory","selectedCategory"]))),128))])}var je=l(Te,[["render",Ee]]);const Be={props:{selectedPage:{type:[Number,String],required:!0,default:1},page:{type:Number,required:!0,default:1}},emits:{"select-page":null}};function Ve(e,t,o,_,i,c){return r(),n("button",{class:$(["pagination__item",{active:o.page==o.selectedPage}]),onClick:t[0]||(t[0]=a=>e.$emit("select-page"))},g(o.page),3)}var We=l(Be,[["render",Ve]]);const Fe={components:{PaginationItem:We},props:{selectedPage:{type:[Number,String],required:!0,default:1},totalPages:{type:Number,required:!0,default:1}},emits:{"select-page":e=>typeof e=="number"||typeof e=="string"}},Me={class:"pagination"},De={class:"pagination__items"};function Ge(e,t,o,_,i,c){const a=d("pagination-item");return r(),n("div",Me,[s("div",De,[(r(!0),n(y,null,m(o.totalPages,u=>(r(),h(a,{key:u,page:u,selectedPage:o.selectedPage,onSelectPage:p=>e.$emit("select-page",u)},null,8,["page","selectedPage","onSelectPage"]))),128))])])}var Le=l(Fe,[["render",Ge]]);const Ae={components:{ProductItem:oe,ProductPopup:xe,TheCategories:je,ThePagination:Le},data(){return{selectedPage:1,selectedCategory:"",totalPages:3,isPopupOpen:!1,popupProductId:null}},methods:{selectCategory(e){this.selectedCategory=e},selectPage(e){this.selectedPage=e},fetchProducts(){this.$store.dispatch("products/fetchProducts",{page:this.selectedPage,category:this.selectedCategory})},openPopup(e){this.isPopupOpen=!0,this.popupProductId=e},closePopup(){this.isPopupOpen=!1}},computed:b(C({},S({products:"products/getProducts"})),{pageStateOptions(){return{category:this.selectedCategory,page:this.selectedPage}}}),watch:{selectedCategory(){this.selectedPage=1},pageStateOptions(e){e.category==""&&e.page==1?this.$router.push({query:{}}):this.$router.push({query:{category:e.category,page:e.page}}),this.fetchProducts()},async"$route.query"(){if(Object.keys(this.$route.query).length===0){this.selectedCategory="",this.selectedPage=1;return}else this.selectedCategory=this.$route.query.category,this.selectedPage=this.$route.query.page},isPopupOpen(){if(this.isPopupOpen){document.documentElement.style.overflow="hidden";return}document.documentElement.style.overflow="auto"}},created(){this.$route.query.category&&(this.selectedCategory=this.$route.query.category),this.$route.query.page&&(this.selectedPage=this.$route.query.page),this.fetchProducts()}},He={class:"products"},Je={class:"container"},Ke={class:"products__inner"},Qe={class:"products__left"},Re={class:"products__right"},Ue={class:"products__items"};function Xe(e,t,o,_,i,c){const a=d("the-categories"),u=d("product-item"),p=d("the-pagination"),v=d("product-popup");return r(),n("div",He,[s("div",Je,[s("div",Ke,[s("div",Qe,[f(a,{onSelectCategory:c.selectCategory,selectedCategory:i.selectedCategory},null,8,["onSelectCategory","selectedCategory"])]),s("div",Re,[s("div",Ue,[(r(!0),n(y,null,m(e.products,P=>(r(),h(u,{key:P.id,product:P,onOpenPopup:tt=>c.openPopup(P.id)},null,8,["product","onOpenPopup"]))),128))]),f(p,{selectedPage:i.selectedPage,totalPages:i.totalPages,onSelectPage:c.selectPage},null,8,["selectedPage","totalPages","onSelectPage"]),i.isPopupOpen?(r(),h(v,{key:0,popupProductId:i.popupProductId,onClose:c.closePopup},null,8,["popupProductId","onClose"])):V("",!0)])])])])}var Ye=l(Ae,[["render",Xe]]);const Ze={components:{TheProducts:Ye}};function et(e,t,o,_,i,c){const a=d("the-products");return r(),h(a)}var it=l(Ze,[["render",et]]);export{it as default};
